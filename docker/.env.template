#############################################
# PatchMon Environment Template
# Copy to .env and fill in required secrets
#############################################

###############
# POSTGRES
###############
POSTGRES_DB=patchmon_db
POSTGRES_USER=patchmon_user
POSTGRES_PASSWORD=                          # REQUIRED – set a strong password

###############
# REDIS
###############
REDIS_PASSWORD=                             # REQUIRED – set a strong password
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

###############
# BACKEND SECRETS
###############
JWT_SECRET=                                 # REQUIRED – strong secret (openssl rand -hex 64)

# Example (uncomment when POSTGRES_PASSWORD is set)
# DATABASE_URL=postgresql://patchmon_user:${POSTGRES_PASSWORD}@database:5432/patchmon_db
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@database:5432/${POSTGRES_DB}

###############
# SERVER ACCESS (Agent + CORS)
###############
SERVER_PROTOCOL=http
SERVER_HOST=localhost
SERVER_PORT=3000
CORS_ORIGIN=http://localhost:3000

###############
# LOGGING
###############
LOG_LEVEL=info

###############
# DATABASE POOL (Prisma)
###############
DB_CONNECTION_LIMIT=30
DB_POOL_TIMEOUT=20
DB_CONNECT_TIMEOUT=10
DB_IDLE_TIMEOUT=300
DB_MAX_LIFETIME=1800

###############
# RATE LIMITS
###############
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=5000

AUTH_RATE_LIMIT_WINDOW_MS=600000
AUTH_RATE_LIMIT_MAX=500

AGENT_RATE_LIMIT_WINDOW_MS=60000
AGENT_RATE_LIMIT_MAX=1000
